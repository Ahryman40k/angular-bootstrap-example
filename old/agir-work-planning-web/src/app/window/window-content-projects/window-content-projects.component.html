<div *ngIf="project" class="pt-0 pb-0 border-bottom shadow-sm">
  <div class="d-flex justify-content-between align-items-center pt-2 pb-2">
    <div class="d-flex">
      <h3 class="pl-4 pr-4 pb-0">
        {{ project.id }}
      </h3>
      <div class="d-flex flex-column pl-4">
        <div class="d-flex align-items-center h-100">
          <span class="mr-1" *ngIf="project | appDrmSubmissionNumberFormat">Soumission</span>
          <div class="mr-1">
            <app-submission-link [object]="project"></app-submission-link>
          </div>
          <div class="mr-1">
            <span class="badge badge-dark d-block">{{ [project.startYear, project.endYear] | vdmJoin: ' - ' }}</span>
          </div>
          <div class="mr-1" *ngIf="project?.status">
            <span class="badge badge-success d-block">
              {{ project.status | appTaxonomy: 'projectStatus' }}
            </span>
          </div>
          <div>
            <span class="badge badge-success-light d-block">
              {{ project.projectTypeId | appTaxonomy: 'projectType' }}
            </span>
          </div>
        </div>
      </div>
    </div>
    <div class="d-flex col-xs-12 pr-3">
      <app-more-options-button [items]="menuItems"></app-more-options-button>
      <button type="button" (click)="close()" class="btn btn-secondary btn-squared font-weight-bold px-2">
        Fermer
      </button>
    </div>
  </div>
</div>

<div *ngIf="project" class="d-flex flex-1 h-0">
  <div class="pl-4 py-3 left-menu border-right scrollable">
    <div class="pb-2 mr-3">
      <ng-select *ngIf="isProjectGeolocated" class="select-control" [items]="navigationMenuItems" bindLabel="id"
        [searchable]="false" [clearable]="false" [compareWith]="compareIntervention" [(ngModel)]="item">
        <ng-template ng-option-tmp let-item="item">
          <div [ngSwitch]="getItemType(item)">
            <div *ngSwitchCase="'project'">
              <h6 class="font-weight-normal">Projet #{{ item.id }}</h6>
            </div>
            <div *ngSwitchCase="'intervention'">
              <h6 class="font-weight-normal">Intervention #{{ item.id }}</h6>
              <div class="font-sm white-space-normal dropdown-description">
                {{ item.interventionName }}
              </div>
            </div>
          </div>
        </ng-template>
      </ng-select>
    </div>

    <div *ngIf="!interventionSelected">
    <app-menu-active *ngFor="let item of menuProject$ | async" [item]="item" [routerLink]="item.link"
      routerLinkActive="active"></app-menu-active>
    </div>
    <div *ngIf="interventionSelected" class="window-content-interventions py-3 pl-2 left-menu border-right scrollable">
      <span class="menu-item" [routerLink]="['interventions', interventionSelected, 'overview']">
        <span class="menu-order-number">1</span>
        Vue d'ensemble
      </span>
      <span class="menu-item" (click)="planificationMenuToggle()">
        <span class="menu-order-number">2</span>
        Planification
        <i class="icon float-right mr-1" *ngIf="planificationMenu$ | async" [class.icon-chevron-up]="planificationMenuShow"
          [class.icon-chevron-down]="!planificationMenuShow" role="icon"></i></span>
      <div class="pl-5" *ngIf="planificationMenuShow">
        <p>
          <app-menu-active *ngFor="let item of planificationMenu$ | async" [item]="item" [routerLink]="item.link"
            routerLinkActive="active"></app-menu-active>
        </p>
      </div>
      <span class="menu-item" (click)="conceptionMenuToggle()">
        <span class="menu-order-number">3</span>
        Suivi de conception
        <i class="icon float-right mr-1" *ngIf="conceptionMenu$ | async" [class.icon-chevron-up]="conceptionMenuShow"
          [class.icon-chevron-down]="!conceptionMenuShow" role="icon"></i></span>
      <div class="pl-5" *ngIf="conceptionMenuShow">
        <p>
          <app-menu-active *ngFor="let item of conceptionMenu$ | async" [item]="item" [routerLink]="item.link"
            routerLinkActive="active"></app-menu-active>
        </p>
      </div>
    </div>
  </div>
  <div class="flex-1 scrollable">
    <router-outlet></router-outlet>
  </div>
</div>
