<h4 class="mt-4 mb-3 d-flex justify-content-between">
  {{title}}
</h4>
<div class="responsive-table clear-bottom-bar" [class.d-none]="isLoading"  *ngIf="(projects$ | async)?.length">
  <div class="responsive-table-header font-sm">
    <ng-container *ngFor="let column of columns; let first=first;">
      <app-checkbox *ngIf="first"
        #masterCheckbox
        class="pl-3 py-0"
        label=""
        labelClass="font-sm"
        (click)="toggleCheckboxes()"
      ></app-checkbox>
      <app-table-column-header *ngIf="column.condition"
        [class]="column.className"
        [columnLabel]="ProgramBookTableColumnLabels[column.columnName]"
        [columnClass]="column.columnName"
        [permission]="Permission.PROJECT_DRM_WRITE"
        [condition]="column.condition"
        [sorting]="column.sorting"
        [direction]="sortedDirection"
        (sortChange)="handleSortChange($event)"
        >
      </app-table-column-header>
    </ng-container>
  </div>
  <div id="responsive-table-body">
    <ng-container *ngFor="let project of projects$ | async; let i = index;">
      <app-program-book-drm-table-item
        #programBookTableItems
        [columnConfig]="columnConfig"
        [programTaxonomies]="programTaxonomies"
        [boroughTaxonomies]="boroughTaxonomies"
        [project]="project"
        [annualProgram]="annualProgram"
        [programBook]="programBook"
        [index]="pagination.offset + i"
        [form]="form"
      >
      </app-program-book-drm-table-item>
    </ng-container>
  </div>
</div>
<app-no-result *ngIf="!(projects$ | async)?.length && !isLoading"
[message]="emptyListMessage" [showEmtyIcon]="true"></app-no-result>
<div *ngIf="isLoading" class="d-flex justify-content-center">
  <app-spinner></app-spinner>
</div>
<div class="container-fluid fixed-bottom p-3 add-button-container shadow-top bg-white" *ngIf="isBottomBarActive">
  <button class="btn btn-secondary btn-squared float-left ml-2 border-0" role="button" (click)="cancel()">
    <span class="btn-label">Annuler</span>
  </button>
  <button class="btn btn-secondary btn-squared float-right ml-2" role="button" (click)="generateDrmNumber(false)" *ngIf="!selectedDrmProjectCount">
    <span class="btn-label">Générer un DRM individuel</span>
  </button>
  <button class="btn btn-secondary btn-squared float-right ml-2" role="button" (click)="generateDrmNumber(true)" *ngIf="!selectedDrmProjectCount && selectedProjectCount > 1">
    <span class="btn-label">Générer un DRM commun</span>
  </button>
  <button class="btn btn-secondary btn-squared float-right ml-2" role="button" (click)="deleteDrmNumber()" *ngIf="selectedDrmProjectCount >= 1">
    <span class="btn-label">{{deleteDrmLabel}}</span>
  </button>
</div>
