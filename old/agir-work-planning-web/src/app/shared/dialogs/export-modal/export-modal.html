<app-layout-modal modalTitle="Exportation des {{ exportedObjectsName }}" [showCloseButton]="!isExporting">
  <!-- Modal content -->
  <div body>
    <!-- Before exporting -->
    <app-alert *ngIf="isBeforeExporting" type="warning">
      <span description>
        <b>Attention!</b>
        <br />
        Avec la configuration actuelle et les filtres appliqués, vous allez exporter
        <b>{{objectsToExportCount | numberPipe}}</b>
        {{ exportedObjectsName }}
        <br /><br />
        Êtes-vous certain de vouloir continuer?
      </span>
    </app-alert>

    <!-- While exporting (spinner) -->
    <div *ngIf="isExporting" class="d-flex flex-column justify-content-center text-center">
      <div class="d-flex justify-content-center mb-2">
        <app-spinner></app-spinner>
      </div>
      <p>Exportation en cours...</p>
    </div>

    <!-- After exporting -->
    <div *ngIf="!isBeforeExporting && !isExporting">
      <app-alert *ngIf="isSuccess" type="success" iconName="icon-check-circle">
        <span description>
          <b>Exportation terminée</b>
        </span>
      </app-alert>
      <app-alert *ngIf="!isSuccess" type="danger" iconName="icon-info">
        <span description>
          <b>Exportation impossible</b>
          <br />
          Une erreur est survenue. Veuillez relancer l'opération.
        </span>
      </app-alert>
    </div>
  </div>

  <!-- Buttons -->
  <!-- Before exporting -->
  <div buttons *ngIf="isBeforeExporting" class="d-flex justify-content-between flex-1">
    <div>
      <button class="btn btn-secondary btn-squared mr-2" type="button" (click)="quit()">
        Annuler
      </button>
      <button class="btn btn-primary btn-squared" type="button" (click)="startExport()">
        Exporter
      </button>
    </div>
  </div>
  <!-- While/After exporting -->
  <div buttons *ngIf="!isBeforeExporting" class="d-flex justify-content-between flex-1">
    <div>
      <button class="btn btn-primary btn-squared" type="button" [disabled]="isExporting" (click)="quit()">
        Fermer
      </button>
    </div>
  </div>
</app-layout-modal>
